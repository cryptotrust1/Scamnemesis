# =============================================================================
# SCAMNEMESIS PRODUCTION ENVIRONMENT - COMPLETE CONFIGURATION
# =============================================================================
# IMPORTANT: Copy this file to .env and fill in the values
# DO NOT use special characters (@, #, :, /, ?, &, %) in passwords!
# =============================================================================

# -----------------------------------------------------------------------------
# NODE ENVIRONMENT
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000

# -----------------------------------------------------------------------------
# DATABASE - PostgreSQL
# -----------------------------------------------------------------------------
# IMPORTANT: Use only alphanumeric characters and underscores in password!
# DATABASE_URL is auto-constructed from these values by docker-entrypoint.sh
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_secure_password_here
POSTGRES_DB=scamnemesis

# Internal Docker network variables (automatically set by docker-compose)
# POSTGRES_HOST=postgres
# POSTGRES_PORT=5432
# DATABASE_URL=postgresql://postgres:password@postgres:5432/scamnemesis

# -----------------------------------------------------------------------------
# REDIS (Cache & Message Queue)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=CHANGE_ME_redis_password_here

# Internal Docker network variables (automatically set by docker-compose)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_URL=redis://:password@redis:6379

# -----------------------------------------------------------------------------
# AUTHENTICATION SECRETS (CRITICAL - min 32 characters each)
# Generate with: openssl rand -base64 32
# -----------------------------------------------------------------------------
# JWT_SECRET: Used to sign access tokens
JWT_SECRET=CHANGE_ME_generate_32_char_secret
# JWT_REFRESH_SECRET: Used to sign refresh tokens
JWT_REFRESH_SECRET=CHANGE_ME_generate_32_char_refresh_secret
# AUTH_SECRET: Used by NextAuth.js v5 for session encryption
AUTH_SECRET=CHANGE_ME_generate_32_char_auth_secret
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# DOMAIN & SSL (Traefik Configuration)
# -----------------------------------------------------------------------------
# IMPORTANT: Use base domain WITHOUT www prefix!
# The Traefik config handles www -> non-www redirects automatically.
# Using www here causes double-www issue (www.www.domain.com)
DOMAIN=scamnemesis.com
ACME_EMAIL=info@scamnemesis.com

# -----------------------------------------------------------------------------
# S3 / MINIO (Object Storage)
# -----------------------------------------------------------------------------
S3_ACCESS_KEY=CHANGE_ME_minio_access_key
S3_SECRET_KEY=CHANGE_ME_minio_secret_key

# Internal Docker network variables (automatically set by docker-compose)
# S3_ENDPOINT=http://minio:9000
# S3_BUCKET=scamnemesis
# S3_REGION=us-east-1
# S3_PUBLIC_URL=https://scamnemesis.com

# -----------------------------------------------------------------------------
# TYPESENSE (Search Engine)
# -----------------------------------------------------------------------------
TYPESENSE_API_KEY=CHANGE_ME_typesense_api_key

# Internal Docker network variables (automatically set by docker-compose)
# TYPESENSE_HOST=typesense
# TYPESENSE_PORT=8108
# TYPESENSE_PROTOCOL=http

# -----------------------------------------------------------------------------
# ML SERVICE (Machine Learning - Embeddings & Image Hashing)
# -----------------------------------------------------------------------------
# Internal Docker network variable (automatically set by docker-compose)
# ML_SERVICE_URL=http://ml-service:8000

# Alternative: OpenAI API for embeddings (optional)
OPENAI_API_KEY=
EMBEDDING_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# CLAMAV (Virus Scanning)
# -----------------------------------------------------------------------------
# Internal Docker network variables (automatically set by docker-compose)
# CLAMAV_HOST=clamav
# CLAMAV_PORT=3310

# -----------------------------------------------------------------------------
# API CONFIGURATION
# -----------------------------------------------------------------------------
API_VERSION=v1
ALLOWED_ORIGINS=https://scamnemesis.com,https://www.scamnemesis.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# FILE UPLOAD CONFIGURATION
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=10
ALLOWED_IMAGE_FORMATS=jpg,jpeg,png,gif,webp

# -----------------------------------------------------------------------------
# EMAIL SERVICE
# -----------------------------------------------------------------------------
# Option 1: Resend (Recommended)
RESEND_API_KEY=
FROM_EMAIL=noreply@scamnemesis.com
SITE_NAME=ScamNemesis

# Option 2: SMTP (Alternative to Resend)
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@scamnemesis.com

# -----------------------------------------------------------------------------
# ADMIN SETUP (Required for first-time admin creation)
# -----------------------------------------------------------------------------
# Token for /api/setup/admin endpoint - generate unique random string
# Generate with: openssl rand -hex 32
ADMIN_SETUP_TOKEN=CHANGE_ME_generate_secure_setup_token
ADMIN_EMAIL=admin@scamnemesis.com
ADMIN_PASSWORD=CHANGE_ME_admin_password_min_12_chars

# -----------------------------------------------------------------------------
# DATA MASKING (Security & Privacy)
# -----------------------------------------------------------------------------
# Generate unique salt: openssl rand -hex 32
MASKING_SALT=CHANGE_ME_generate_unique_masking_salt
ENABLE_DETERMINISTIC_MASKING=true
ENABLE_AUDIT_LOGGING=true

# Debug mode (set to true only for troubleshooting)
DEBUG_MODE=false

# -----------------------------------------------------------------------------
# VIEW TRACKING (Report Analytics)
# -----------------------------------------------------------------------------
# Salt for secure IP hashing - generate unique random string
# Generate with: openssl rand -hex 32
VIEW_TRACKING_SALT=CHANGE_ME_generate_view_tracking_salt

# -----------------------------------------------------------------------------
# WEBHOOK SECURITY
# -----------------------------------------------------------------------------
# Secret for webhook signature verification
# Generate with: openssl rand -hex 32
WEBHOOK_SECRET=CHANGE_ME_generate_webhook_secret

# -----------------------------------------------------------------------------
# DUPLICATE DETECTION CONFIGURATION
# -----------------------------------------------------------------------------
DUPLICATE_THRESHOLD_CONFIG=default
ENABLE_EXACT_MATCH=true
ENABLE_FUZZY_MATCH=true
ENABLE_VECTOR_MATCH=true
ENABLE_IMAGE_MATCH=true

# -----------------------------------------------------------------------------
# BACKGROUND JOBS
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=5
JOB_TIMEOUT_MS=30000

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_VIRUS_SCAN=true
ENABLE_FACE_DETECTION=false
ENABLE_OCR=false
ENABLE_WEB_CRAWLERS=false

# Partner Widgets - Embeddable search widgets for external websites
# Set to 'true' to enable widget creation and management
ENABLE_PARTNER_WIDGETS=true

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# PUBLIC URLS (Client-side accessible)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=https://scamnemesis.com
NEXT_PUBLIC_SITE_URL=https://scamnemesis.com
NEXT_PUBLIC_DOMAIN=scamnemesis.com

# -----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY (Optional)
# -----------------------------------------------------------------------------
# Sentry Error Tracking
SENTRY_DSN=

# New Relic APM
NEW_RELIC_LICENSE_KEY=

# Grafana Admin Credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_grafana_password

# -----------------------------------------------------------------------------
# NOTES
# -----------------------------------------------------------------------------
# Variables marked with "automatically set by docker-compose" are configured
# in docker-compose.prod.yml and should not be set in .env unless you are
# using a custom deployment setup.
#
# Security best practices:
# 1. Generate all secrets using: openssl rand -hex 32
# 2. Use strong passwords (min 12 characters, mix of letters/numbers)
# 3. Never commit .env file to version control
# 4. Rotate secrets regularly in production
# 5. Use different secrets for different environments
