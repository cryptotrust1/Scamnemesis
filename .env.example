# ============================================================================
# SCAMNEMESIS - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and update values for your environment

# ===========================================================================
# NODE ENVIRONMENT
# ===========================================================================
NODE_ENV=development  # development, production, test
PORT=3000

# ===========================================================================
# DATABASE CONFIGURATION (PostgreSQL + pgvector)
# ===========================================================================
# IMPORTANT: For Docker deployment, use POSTGRES_* variables below.
# The DATABASE_URL is auto-constructed by docker-entrypoint.sh with proper URL encoding.
# For local development without Docker, set DATABASE_URL directly.
DATABASE_URL=postgresql://postgres:scamnemesis_dev_password@localhost:5432/scamnemesis
POSTGRES_DB=scamnemesis
POSTGRES_USER=postgres
# NOTE: Password can contain special characters (@, #, :, etc.) - they will be URL-encoded
POSTGRES_PASSWORD=scamnemesis_dev_password

# ===========================================================================
# REDIS CONFIGURATION (Cache & Message Queue)
# ===========================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=scamnemesis_redis_2024

# ===========================================================================
# S3/MINIO CONFIGURATION (Object Storage)
# ===========================================================================
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=scamnemesis
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
# For production, use external S3 or MinIO
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_ACCESS_KEY=YOUR_AWS_ACCESS_KEY
# S3_SECRET_KEY=YOUR_AWS_SECRET_KEY

# ===========================================================================
# TYPESENSE CONFIGURATION (Full-text Search)
# ===========================================================================
TYPESENSE_HOST=localhost
TYPESENSE_PORT=8108
TYPESENSE_PROTOCOL=http
TYPESENSE_API_KEY=dev-typesense-key

# ===========================================================================
# ML SERVICE CONFIGURATION (Python FastAPI)
# ===========================================================================
ML_SERVICE_URL=http://localhost:8000
MODEL_CACHE_DIR=/tmp/ml_models

# ===========================================================================
# CLAMAV CONFIGURATION (Virus Scanning)
# ===========================================================================
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# Duplicate Detection Thresholds
DUPLICATE_THRESHOLD_CONFIG=default  # 'default', 'strict', or 'relaxed'
ENABLE_EXACT_MATCH=true
ENABLE_FUZZY_MATCH=true
ENABLE_VECTOR_MATCH=true
ENABLE_IMAGE_MATCH=true

# Background Job Configuration
WORKER_CONCURRENCY=5
JOB_TIMEOUT_MS=30000

# API Configuration
API_PORT=3000
API_HOST=0.0.0.0

# Admin Configuration (optional)
PGADMIN_PASSWORD=admin
PGADMIN_EMAIL=admin@scamnemesis.local

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# ===========================================================================
# SECURITY & AUTHENTICATION
# ===========================================================================
# IMPORTANT: Change these secrets in production!
JWT_SECRET=dev-jwt-secret-change-in-production-use-openssl-rand-base64-32
JWT_REFRESH_SECRET=dev-jwt-refresh-secret-change-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=your-session-secret-here-change-in-production
WEBHOOK_SECRET=your-webhook-secret-here-change-in-production
API_KEY_SALT=your-api-key-salt-here-change-in-production

# ===========================================================================
# AUTH.JS (NextAuth v5) CONFIGURATION
# ===========================================================================
# Required: Generate with: openssl rand -base64 32
AUTH_SECRET=your-auth-secret-here-generate-with-openssl-rand-base64-32

# Optional: OAuth Providers (Google)
# Create at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Optional: OAuth Providers (GitHub)
# Create at: https://github.com/settings/developers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Auth.js URL (required in production)
# NEXTAUTH_URL=https://scamnemesis.com

# ===========================================================================
# CORS & API CONFIGURATION
# ===========================================================================
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
NEXT_PUBLIC_API_URL=http://localhost:3000
API_VERSION=v1

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100

# File Upload
MAX_FILE_SIZE_MB=10
ALLOWED_IMAGE_FORMATS=jpg,jpeg,png,gif,webp

# Email (for notifications)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@scamnemesis.com

# ===========================================================================
# WORDPRESS PLUGIN DEVELOPMENT (optional)
# ===========================================================================
WP_DB_PASSWORD=wordpress
WP_DB_ROOT_PASSWORD=rootpassword

# ===========================================================================
# ADMIN TOOLS (optional)
# ===========================================================================
PGADMIN_PASSWORD=admin

# ===========================================================================
# MONITORING & OBSERVABILITY (optional)
# ===========================================================================
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ===========================================================================
# PRODUCTION SSL/TLS (Traefik + Let's Encrypt)
# ===========================================================================
# IMPORTANT: Set these for production deployment!
DOMAIN=scamnemesis.com
ACME_EMAIL=admin@scamnemesis.com

# ===========================================================================
# FEATURE FLAGS
# ===========================================================================
ENABLE_VIRUS_SCAN=true
ENABLE_FACE_DETECTION=false  # Not implemented yet
ENABLE_OCR=false  # Not implemented yet
ENABLE_WEB_CRAWLERS=false  # Not implemented yet
